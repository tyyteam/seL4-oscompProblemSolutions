# Notifications

## Notification objects
通过对notification对象的capability的**系统调用**来进行信号的发送和接收；一个notification对象有数据字（data word）组成，其表现未一组二进制信号量数组和一个TCB等待队列（等待notification信号的到来）
Notification对象有三种状态：
- Waiting
存在TCB在这个Notification的等待队列中，等待信号到来
- Active
有TCB向这个Notification发送了信号
- Idle
没有TCB处于等待队列中，也没有TCB向该notification发送信号

与notification对象的三种系统调用：
1. **`seL4_Signal`**
当一个线程向notification对象发送信号时，对于notification对象的不同状态会发生不同的事情：
- **Idle**
notification对象的数据字（data word）字段会被设置为用来发送信号的capability的badge，然后状态变为Active
- **Active**
notification对象的数据字（data word）字段被设置为其与用来发送信号的capability的badge的逐位或
- **Waiting**
notification对象的TCB等待队列中的的第一个TCB被唤醒，然后会把badge发送给这个TCB**（？？？）**。如果队列变空了，那么状态变为Idle

如果不同的信号发送者都在badge中使用不同的比特位，那么它们就各自可以设置basge bits **（就是data word吧？？？）**，然后等待者可以观察到哪个比特位被设置了

2. **`seL4_Wait`**
- **Idle**
TCB加入等待队列中
- **Active**
TCB接收data word，并且把notification对象的data word置为0，notification状态转变为Idle **这里有个问题，如果发送了多个信号都是在同一个data word上做逐位或操作，然后只被一个TCB接收？
- **Waiting**
TCB插入到等待队列队尾

3. **`seL4_Poll`**
`seL4_Wait`的非阻塞版本，不管如何结果都会立即返回

