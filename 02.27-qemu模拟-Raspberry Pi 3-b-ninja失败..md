# qemu安装

qemu按照官网方式编译，最后加make install完成安装。输入qemu-+tab补全，效果如下：

![image-20220225201313343](C:/Users/Liu%20Qingtao/AppData/Roaming/Typora/typora-user-images/image-20220225201313343.png)

qemu-system-aarch64 -machine help查看支持的机器，输入：qemu-system-aarch64 -machine raspi3b，效果如下：

![image-20220225201429336](https://raw.githubusercontent.com/GooTal/picBed/admin/img/image-20220225201429336.png)



```
qemu-system-aarch64 -machine raspi3b 
```

可能后期要改，比如-m等参数



# sel4编译

sel4给的官方文档[seL4 on the Raspberry Pi 3 – Trustworthy Systems Blog (csiro.au)](https://research.csiro.au/tsblog/sel4-raspberry-pi-3/)

安装repo[下载源代码  | Android 开源项目  | Android Open Source Project](https://source.android.com/source/downloading)

编译sel4[seL4 on the Raspberry Pi 3 – Trustworthy Systems Blog (csiro.au)](https://research.csiro.au/tsblog/sel4-raspberry-pi-3/)



我是64位centos，在交叉编译seL4-Test project报错：

![image-20220225223238666](C:/Users/Liu%20Qingtao/AppData/Roaming/Typora/typora-user-images/image-20220225223238666.png)

## 要安装交叉编译器

[CentOS8 安装ARM Linux交叉编译环境_小歆CSDN博客-CSDN博客](https://blog.csdn.net/zhangzejin3883/article/details/117257299?spm=1001.2101.3001.6650.1&utm_medium=distribute.pc_relevant.none-task-blog-2~default~CTRLIST~Rate-1.pc_relevant_antiscan&depth_1-utm_source=distribute.pc_relevant.none-task-blog-2~default~CTRLIST~Rate-1.pc_relevant_antiscan&utm_relevant_index=2)。

[Ubuntu12.04嵌入式交叉编译环境arm-linu-gcc搭建过程，图解_王文松的博客-CSDN博客_ubuntu 编译arm](https://blog.csdn.net/mybelief321/article/details/9076583)。

[arm交叉编译工具使用报错_lyndon-CSDN博客_交叉编译报错](https://blog.csdn.net/lyndon_li/article/details/88826702)。

[centos7安装arm-linux-gcc-4.4.3交叉编译器_苦苦的潜行者-CSDN博客_arm-linux-gcc-4.4.3](https://blog.csdn.net/xiaolinyouni/article/details/103168692)。

找官方库？[arm-linux-gcc下载与安装-阿里云开发者社区 (aliyun.com)](https://developer.aliyun.com/article/48403)。



## 安装交叉编译器后再次报错

![image-20220226094615168](C:/Users/Liu%20Qingtao/AppData/Roaming/Typora/typora-user-images/image-20220226094615168.png)

好像要安装device-tree-compiler

[Install Device Tree Compiler on CentOS using the Snap Store | Snapcraft](https://snapcraft.io/install/device-tree-compiler/centos).可能遇到too early for operation, device not yet seeded or device model not acknowledged错误，见[centos 安装 snapd 报错: too early for operation, device not yet seeded or device model not acknowledged_程序猿在武汉-CSDN博客](https://blog.csdn.net/u010620626/article/details/117259178)。

要安装pyfdt

[在python中安装包出现Retrying (Retry(total=4, connect=None, read=None, redirect=None, status=None))_lsf_007的博客-CSDN博客](https://blog.csdn.net/lsf_007/article/details/87931823?spm=1001.2101.3001.6661.1&utm_medium=distribute.pc_relevant_t0.none-task-blog-2~default~BlogCommendFromBaidu~HighlightScore-1.queryctrv2&depth_1-utm_source=distribute.pc_relevant_t0.none-task-blog-2~default~BlogCommendFromBaidu~HighlightScore-1.queryctrv2&utm_relevant_index=1).

安装Jinja2

[python - ImportError: No module named jinja2 - Stack Overflow](https://stackoverflow.com/questions/18944345/importerror-no-module-named-jinja2)。

module ‘yaml’ has no attribute 'FullLoader’错误：

[[linux操作\]module ‘yaml‘ has no attribute ‘FullLoader‘_Slientsake的博客-CSDN博客](https://blog.csdn.net/weixin_49627776/article/details/121309023?spm=1001.2101.3001.6661.1&utm_medium=distribute.pc_relevant_t0.none-task-blog-2~default~CTRLIST~Rate-1.pc_relevant_default&depth_1-utm_source=distribute.pc_relevant_t0.none-task-blog-2~default~CTRLIST~Rate-1.pc_relevant_default&utm_relevant_index=1)。

好像成功：

![image-20220226111946672](https://raw.githubusercontent.com/GooTal/picBed/admin/img/image-20220226111946672.png)

### ninja步骤

还报错，缺少库

![image-20220226112520839](https://raw.githubusercontent.com/GooTal/picBed/admin/img/image-20220226112520839.png)

past库

[Python中Import Error: no module named 'past'错误以及解决方法_皇族永不言弃-CSDN博客](https://blog.csdn.net/qq_31282773/article/details/78672584)。

ModuleNotFoundError: No module named 'google'

[python - ImportError: No module named 'google' - Stack Overflow](https://stackoverflow.com/questions/36183486/importerror-no-module-named-google)。

from .proto import nanopb_pb2 ImportError: attempted relative import with no known parent package：

[编译出错 ninja: build stopped: subcommand failed Android 源码编译_锅ke24的专栏-CSDN博客_ninja:build stopped:subcommand](https://blog.csdn.net/gh1026385964/article/details/80581218)。

### build.ninja 修改？？？？？

* 文件中的-Werror需要去掉，不然会严格将警告当做错误。
* 搜索 apps/sel4test-driver/sel4test-tests/CMakeFiles/sel4test-tests.dir/src/tests/domains.cxx.obj.d，在其下面的FLAGS中，加入-std=c++11。

换个思路，官方是低版本gcc编译的：

[Linux 安装指定版本GCC方法_beyondLi71的博客-CSDN博客_安装低版本gcc](https://blog.csdn.net/liboyang71/article/details/77152577)。



# Ubuntu用它了

官方依赖教程：[Host Dependencies | seL4 docs](https://docs.sel4.systems/projects/buildsystem/host-dependencies.html)。

用docker试试？[Using Docker for seL4, Camkes, and L4v dependency management | seL4 docs](https://docs.sel4.systems/projects/dockerfiles/)。





ubuntu reboot 问题

[Ubuntu 12.04 (Wubi) not starting - root.disk corrupted - Ask Ubuntu](https://askubuntu.com/questions/228709/ubuntu-12-04-wubi-not-starting-root-disk-corrupted)

升级ubuntu20了

