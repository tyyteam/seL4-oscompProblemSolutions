# Interrepts
中断通过notifications产生

## IRQHandlers（中断请求）
IRQHandler表示一个中断请求，IRQHandler capability是对某个中断进行配置的capability
系统刚初始化时没有IRQHandler，根任务会有一个`seL4_CapIRQControl`，这个capability可以在CSpaces和CSlots之间移动，但是不能被复制；这个capability用来产生IRQHandler，销毁这个capability会使得对所有中断请求的capability被移除；IRQHandler Capability可以被移动和复制

根据平台不同，使用IRQControl Capability产生IRQHandler Capability的系统调用不同，通用的形式是这样的：
`error = seL4_IRQControl_Get(seL4_IRQControl, 7, cspace_root, 10, seL4_WordBits);`
表示使用seL4_IRQControl生成中断号为7的IRQHandler Capability，将其放在当前CSpace根中的第10个slot中

根据平台不同使用到的函数如下：
`seL4_IRQControl_GetIOAPIC `(x86)
`seL4_IRQControl_GetMSI `(x86)
`seL4_IRQControl_GetTrigger `(ARM)

## 接收中断
1. 配置notification
需要配置中断请求发生时，需要将信号量发送给哪个notification，使用到`seL4_IRQHandler_SetNotification()`，然后驱动程序可以在这个notification上使用poll或者wait等待中断请求到来；可以使用`seL4_IRQHandler_Clear()`来解除IRQHandler和notification之间的绑定
2. 中断处理结束
中断处理完调用`seL4_IRQHandler_Ack()`通知内核中断处理完毕，清除中断请求位；然后可以继续发送和处理中断请求



